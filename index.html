<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Display Webcam Stream</title>
 
<style>
#videoElement {
	width: 500px;
	height: 375px;
	background-color: #666;
}
#canvas {
	width: 500px;
	height: 375px;
	background-color: #666;
}
</style>
</head>
 
<body>
<video autoplay="true" id="videoElement"></video>
<canvas id="canvas"></canvas>
<button id="capture">Capture</button>
<form id="myForm" method="post">
	<div>
		<label for="projectID">Enter projectID:</label>
		<input type="text" name="projectID">
	</div>
	<div>
		<label for="files">Upload files:</label>
		<input type="file" id="files" name="files">
	</div>
<button id="predict">Predict</button>
</form>
	
<script>
const axios = require('axios');
	
var video = document.querySelector("#videoElement");
var canvas = document.querySelector("#canvas");
var captureButton = document.querySelector("#capture");
var myForm = document.querySelector("#myForm");
var predictButton = document.querySelector("#predict");
	
predictButton.onclick = async function() {
	formData = new FormData(myForm);
	console.log(formData.projectID);
	await axios.post(`localhost:3020/storage_api/file_system/`
		+ `face_detection/projects/${formData.projectID}}/predict-files`,
	    	formData,
	  	{ headers: {'Content-Type': 'application/json'} },
	);
	
captureButton.onclick = video.onclick = function() {
	canvas.width = video.videoWidth;
	canvas.height = video.videoHeight;
	canvas.getContext('2d').drawImage(video, 0, 0);
}

if (navigator.mediaDevices.getUserMedia) {
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(function (stream) {
      video.srcObject = stream;
    })
    .catch(function (err0r) {
      console.log("Something went wrong!");
    });
}
</script>
	
</body>
</html>
